<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>ClassTask To-Do List for students</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- start favicon stuff -->
    <link rel="apple-touch-icon" sizes="57x57" href="img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">
    <link rel="manifest" href="img/favicons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="img/favicons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- end favicon stuff -->


    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>

    <style>
        img {
            line-height: 1.2;
            margin: 0;
            padding: 5px;
        }
        body {
            padding-left: 10px;
        }
        form {
            padding-bottom: 30px;
        }
        .results {
            background-color: #b3d4fc;
            padding: 10px;
            border: solid;
            margin-top: 25px;
        }
        #results_pic {
            width: 200px;
        }
    </style>

</head>
<body>

<!-- The following lines perform a special browser check that only IE recognizes.
     See here for more info: http://stackoverflow.com/a/9433484/7434090 -->
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->


<p>Welcome to ClassTask, a to-do list made just for students.</p>

<form action="#">
    <input type="text" id="register_email_textbox" placeholder="Email address" required>
    <input type="text" id="register_password_textbox" placeholder="password" required>
    <button id="register_button">Register</button>
</form>

<form action="#">
    <input type="text" id="signin_email_textbox" placeholder="Email address" required>
    <input type="text" id="signin_password_textbox" placeholder="password" required>
    <button id="signin_button">Sign in</button>
</form>

<button id="profile_info_button">Print profile info</button>
<button id="sign_out_button">Sign out</button>

<br /><br />

<form action="#">
    <input type="text" id="class_chosen_textbox" placeholder="class" required>
    <input type="text" id="task_textbox" placeholder="task" required>
    <input type="text" id="due_date_textbox" placeholder="due date">
    <button type="submit" id="write_button">Write to database</button>
</form>

<form action="#">
    <button id="read_button">Read from database</button>
</form>

<div class="results">
    <p id="results_class_chosen"></p>
    <p id="results_task"></p>
    <p id="results_due_date"></p>

</div>

<img src="img/logo-extra-small.png">
<img src="img/logo-small.png">
<img src="img/logo-medium.png">
<img src="img/logo-large.png">


<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.0.min.js"><\/script>')</script>
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>

<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-messaging.js"></script>
<script>

    // Initialize Firebase. This code should stay at the top of the <script> section
    var config = {
        apiKey: "AIzaSyAEPEyYJBvmqqwu4XSFitMUENdskmKp0fc",
        authDomain: "classtask-162513.firebaseapp.com",
        databaseURL: "https://classtask-162513.firebaseio.com",
        storageBucket: "classtask-162513.appspot.com",
        messagingSenderId: "453189316211"
    };
    firebase.initializeApp(config);

    // Get a reference to the database service
    var database = firebase.database();

    document.getElementById("write_button").addEventListener("click", function(){
        writeUserData();
    });

    function writeUserData() {
        var userId = firebase.auth().currentUser.uid;
        firebase.database().ref('users/' + userId).set({
            classChosen: document.getElementById("class_chosen_textbox").value,
            task: document.getElementById("task_textbox").value,
            dueDate : document.getElementById("due_date_textbox").value
        });
    }

    document.getElementById("read_button").addEventListener("click", function(){
        readUserData();
    });

    function readUserData() {
        var userId = firebase.auth().currentUser.uid;
        return firebase.database().ref('/users/' + userId).on('value', (function(snapshot) {
            var classChosen = snapshot.val().classChosen;
            var task = snapshot.val().task;
            var dueDate = snapshot.val().dueDate;

            document.getElementById("results_class_chosen").textContent = classChosen;
            document.getElementById("results_task").textContent = task;
            document.getElementById("results_due_date").textContent = dueDate;
        }));
    }

    document.getElementById("register_button").addEventListener("click", function() {
        var email = document.getElementById("register_email_textbox").value;
        var password = document.getElementById("register_password_textbox").value;
        firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            alert("Registration error occurred \n" + "Error code: " + errorCode + "\nError message: " + errorMessage);
        });
    });

    document.getElementById("signin_button").addEventListener("click", function() {
        var email = document.getElementById("signin_email_textbox").value;
        var password = document.getElementById("signin_password_textbox").value;
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            alert("Sign-in error occurred \n" + "Error code: " + errorCode + "\nError message: " + errorMessage);
        });
    });

    document.getElementById("profile_info_button").addEventListener("click", function() {
        var user = firebase.auth().currentUser;

        if (user != null) {
            user.providerData.forEach(function (profile) {
                alert("Email: " + profile.email + "\nUID: " + user.uid);
            });
        }
        else {
            alert("Not signed in!");
        }
    });

    document.getElementById("sign_out_button").addEventListener("click", function() {
        firebase.auth().signOut().then(function() {
            // Sign-out successful.
        }).catch(function(error) {
            // An error happened.
            alert("Sign-out error occurred \n" + "Error code: " + errorCode + "\nError message: " + errorMessage);
        });
    });


<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='https://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-XXXXX-X','auto');ga('send','pageview');

</script>
</body>
</html>
